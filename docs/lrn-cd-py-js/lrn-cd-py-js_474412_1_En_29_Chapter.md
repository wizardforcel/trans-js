© 作者，Springer Fachmedien Wiesbaden GmbH独家授权，属于Springer Nature的一部分 2024J. L. Zuckarelli 《用Python和JavaScript学习编程》 [https://doi.org/10.1007/978-3-658-42912-6_29](https://doi.org/10.1007/978-3-658-42912-6_29)

# 29. 程序执行与Hello World：我需要做什么才能运行一个程序？

Joachim L. Zuckarelli^([1](#Aff2)  )(1)德国慕尼黑概述

JavaScript程序通常集成到网页中。因此，为了使程序具有功能性，我们首先需要理解如何将它集成到网页中。本章将涵盖此过程所需的HTML基本知识，并说明将HTML网页与JavaScript代码链接的不同方法。在本节中，你还将有机会编写你的第一个“Hello World”JavaScript程序。

在本章中，你将学到：

+   如何使用HTML元素**script**在网页中引用JavaScript脚本（如果你还不熟悉HTML，本章也会简要介绍“网页编程语言”）

+   如何使用**script**元素将JavaScript代码直接嵌入网页

+   如何通过特殊的网络服务来尝试JavaScript，而不必担心将你的脚本嵌入网页

+   如何用JavaScript编写你的第一个“Hello World”程序

## 29.1 在网页中嵌入JavaScript代码

### 29.1.1 HTML中的Script元素

与Python不同，JavaScript不需要解释器来运行，因为它是嵌入在网页中并由浏览器与网页一起解释的。这意味着，虽然我们不必担心如何运行JavaScript程序，因为浏览器会为我们处理，但我们确实需要处理如何将JavaScript程序集成到网页中。

网页由用描述性编程语言HTML（*超文本标记语言*）编写的代码组成；关于描述性语言与其他语言的概念性区别，请回滚至► 第[3.1节](474412_1_En_3_Chapter.xhtml#Sec1)。如果你已经知道HTML的基本工作原理（而且我们这里只需要基本知识），那就继续往下读。如果你觉得自己的知识需要快速复习一下，那么在继续阅读之前，先翻到HTML（超文本标记语言）背景框。

HTML（超文本标记语言）

**网页的语言**

HTML是编写网页的语言。它由物理学家*蒂姆·伯纳斯-李*于1980年代末在欧洲核子研究中心CERN开发。伯纳斯-李不仅被英国女王授予贵族头衔，获得了无数其他荣誉（如*图灵奖*，广泛被认为是计算机科学领域的诺贝尔奖），并被《时代杂志》列为*20世纪最重要的100人*，而且普遍被认为是万维网的父亲。如今，HTML标准由*万维网联盟*（也称为*W3C*）定义。

**HTML元素及其组成部分**

HTML文档由HTML元素组成。这样的HTML元素基本上有三个组成部分：

+   *标签*：标签是标记HTML元素开始和结束的符号；为了将其与文档的其他部分区分开来，标签被“<”和“>”符号包围，在闭合标签中，元素名称前有一个斜杠（**/**）。开闭标签的组合可能如下所示：**<h1>…</h1>**。

+   *内容*：标签之间通常可以包含内容。例如，**h1**元素描述的是一级标题（*header 1*）。标题文本被放置在开闭标签之间，例如：**<h1>介绍</h1>**。

+   *属性*：属性位于开标签内，用于修改标签的行为。它们由属性名和属性值组成。属性值用引号括起来，并通过等号赋给属性名。例如，属性**dir**控制文本显示的方向。它的值**rtl**表示*从右至左*，即文本从右向左显示（右对齐）。将其嵌入到我们的**h1**元素中，属性就会是这样：**<h1 dir="rtl">介绍</h1>**。

**HTML文档的结构**

许多HTML元素可以相互嵌套。这导致了一个层次结构，网页浏览器读取并显示为*文档对象模型*（*DOM*）。这在HTML文档的结构中已经显现出来。HTML文档由头部（**head**元素）和主体（**body**元素）组成。文档头部通常包含关于文档的一般信息，如文档的标题或搜索引擎用来索引网页的元信息（如关键词或描述）。文档的主体则包含网页的实际内容；因此，它通常是文档中比例较大的部分。

**头部**和**主体**被嵌入到一个包围的**html**元素中，这个元素通常被称为根元素，因为它是文档对象模型中层级最高的元素。

一个简单的网站可能是这样的：**<!DOCTYPE html>****<html>****<head>****<title>**Test Page**</title>****</head>****<body>****<h1>**Introduction**</h1>****<p>**Here is some text.**</p>****</body>****</html>**

**DOCTYPE** 元素是可选的（并且是那些没有闭合标签的特殊类型元素之一），它描述了该文档是一个 HTML 文档。在文档的 **body** 部分，你会看到另一个元素，**p**。它标记了一段文本，通常会在文本上下留下空白，展示时使文本呈现为一个独立的段落。

HTML 文档源代码中的制表符缩进仅为提高可读性而添加，在解释文档内容时会被忽略，就像标签的大小写（HTML 对大小写不敏感）一样。因此，下面的代码也是一个有效的网页：**<!DOCTYPEhtml><html><head><TITLE>Test Page</title></head><body><h1>Introduction</h1><p>Here is some text.</p></BOdy></HTML>**

将这段代码（最好保留缩进）粘贴到一个空文件中，使用编辑器保存，并将文件扩展名设置为 **.htm** 或 **.html**，然后你就有了一个小网页，可以使用浏览器打开并查看。

顺便说一下：HTML 也有 *注释*：它们有特殊的开启和关闭标签，分别是 **<!--** 和 **-->**。注释也可以是多行的。

**层叠样式表 (CSS)**

除了网页的 HTML 源代码和脚本，特别是我们在本书中将要处理的 JavaScript 程序之外，*层叠样式表* (*CSS*) 是现代网页的重要组成部分。以前，通常会直接在网页的 HTML 源代码中通过 HTML 元素和属性来指定格式化；例如，可以使用 **align** 属性轻松地将文本居中，该属性在 **p** 元素等中得到支持：**<p align="center"><Here is some centered text</p>**。但是，如果一个网页想要从根本上改变其设计，或者如果一个网页的“部分”需要在另一个使用不同设计的网页上显示，那么就必须在 HTML 代码中进行繁琐且容易出错的详细修改。

引入*层叠样式表*后，这一过程变得更加简单。层叠样式表的思想是将网页的结构和内容与设计和格式化分离，这样可以更轻松地替换或调整设计，而不必深入网页中处理结构和内容的部分。通过在一个单独的文件中描述格式和设计（通常扩展名为**.css**）并不直接在HTML文件中进行实现，层叠样式表就实现了这一目标。例如，在样式表中，可以指定**h1**标题应始终显示为蓝色且为粗体。如果网站的设计进行了修改，默认的标题颜色改为红色，那么这个修改只需要在一个地方进行，即在样式表中。然后，整个HTML文档中所有**h1**标题的显示会自动更新。一个相关的优势显而易见。相同的CSS文件可以用于多个不同的网页，因此，一个包含数百个子页面的大型网站可以非常容易地根据新的需求调整其设计。

然而，有时你并不想将*所有*类型为**h1**的标题格式化为固定的样式，而只想格式化某些特定的标题。为此，存在**class**属性，它可以与几乎所有HTML元素一起使用，并且你在查看网页源代码时经常可以看到它。例如，可以通过这种方式区分一个标题：**<h1 class="section">新闻</h1>**。现在，这个属性可以在CSS代码中引用。这意味着，CSS中存储的一些格式化规则仅适用于这一类**h1**元素，而不适用于其他**h1**元素。CSS可能包含如下代码，用于格式化**h1**标题元素：

h1.section {color: red;}h1 {color: blue;font-weight: bold;}

在这里，我们也可以清楚地看到“*级联*”这一术语的含义。属性属性是*继承*的。CSS中的通用**h1**格式声明规定文本颜色应该是蓝色。而**section**类的**h1**元素格式与此不同。对于它们，适用的是另一个声明，即颜色为红色。另一方面，来自**h1**元素的CSS中的声明**font-weight: bold**并未被**section**类的**h1**元素的特殊声明覆盖，因此也适用于它们。因此，**section**类的**h1**元素，和所有**h1**元素一样，也会以粗体显示。

与HTML标准一样，CSS标准也由万维网联盟（W3C）管理和发展。

要让一个JavaScript程序工作，我们需要将其嵌入到网页中。这可以通过**script**元素来实现，你可以在以下示例中看到它的使用：

**<!DOCTYPE html>**<**html>****<head>****<title>**测试页面**</title>****</head>****<body>****<script** src="helloworld.js"**></script>****</body>****<html>**

脚本文件的名称作为**src**（*source*）属性的值进行指定。

在这个示例中，我们将脚本元素放在了网页的正文中，但我们也可以把它放在头部。不过，通常情况下，脚本都会包含在正文中，或者更准确地说：放在正文的末尾。这样做是有充分理由的：脚本在它们被放置的 HTML 文档中执行。如果你的脚本在网页的末尾，并且需要稍长时间才能完全执行——没问题。此时网页的其他部分已经加载并显示出来。如果脚本位于 HTML 文档的开头，并且因此最先执行，那么观看者可能不得不在空白页面前等待，直到 JavaScript 代码执行完毕，这样会更不愉快。

我们在这里将我们的 JavaScript 程序代码作为*额外文件*包含。这是常见的做法。不过，你也可以将（特别是短小的）脚本*直接*包含在 HTML 文件中。这样看起来会是这样：

**<!DOCTYPE html>**<**html>****<head>****<title>**测试页面**</title>****</head>****<body>****<script** type="text/JavaScript"**>**console.log("This goes to the console!")**</script>****</body>****<html>**

通过**type**属性设置**script**元素，我们告诉浏览器的 HTML 引擎，位于开始和结束标签之间的代码（在我们示例中只有一行）应当被理解为 JavaScript 代码。事实上，JavaScript 是唯一使用的脚本语言。然而，在过去，你可能偶尔会遇到 Microsoft 的 VBScript，它的实际应用相当有限，因为它只被 Microsoft 自家的浏览器支持，并且有一个强有力的竞争对手——JavaScript。

### 29.1.2 安全方面

启用浏览器中的脚本执行

尽管许多流行的网站以某种形式使用 JavaScript，如果禁用 JavaScript 代码执行，它们将无法正常工作或根本无法工作。然而，所有现代浏览器都允许你禁用脚本代码的执行。所以，看看你浏览器的设置，看看是否有任何东西可能妨碍你享受第一个 JavaScript 程序。

当一个网站的功能依赖于能够运行 JavaScript 时，你自然希望提示页面用户启用 JavaScript。这可以通过在页面的 HTML 源代码中使用**noscript**元素，并给用户一个提示信息来轻松实现，示例如下：

**<noscript>**请启用 JavaScript 才能使用此网站。**</noscript>**

只有在浏览器的安全设置中禁用 JavaScript 执行时，消息才会显示（试试看！）。

源代码的可见性

与 PHP 不同，JavaScript 程序是由浏览器解释的（即客户端）。为了做到这一点，JavaScript 必须先被下载，而 PHP 代码则不需要，因为它的解释器完全在服务器上运行，并不使用客户端的资源进行执行。因此，你无法将源代码隐藏在用户的视线之外，即使你将其放入一个额外的文件，并通过 **<script src=…>** 从 web 服务器加载。正如你将在接下来的章节中看到的，通常代码是很容易被看到的。当然，也有一些混淆的方法和工具，通过它们源代码几乎可以加密。但即使是这些方法也有其限制，因为浏览器必须解码源代码才能执行它。因此，预期你的 JavaScript 程序会被网站的访问者看到。这对于普通用户来说可能不成立，但那些有能力理解 JavaScript 代码的人会知道如何访问它。

## 29.2 JavaScript中的“Hello World”

### 29.2.1 自己动手做：并不那么费力的方法

经典的 JavaScript “hello world” 程序非常简单：

console.log("Hello World!")

如果你将这一行代码保存为一个 JavaScript 文件 **helloword.js**，然后在一个其他部分为空（仅包含必需元素）的 HTML 网页文档中引入这个脚本，就像前一节的示例所示，你已经成功完成了这个任务。

现在，当你在浏览器中打开完成的 HTML 文档时，你会看到……什么也没有！

我们的简单程序没有工作吗？是的，它确实工作了，只是它没有在浏览器窗口中输出文本，而是在另一个区域，即 *JavaScript 控制台* 中。如何打开这个控制台，它默认不显示，而且更多的是开发者工具，因浏览器不同而有所不同：例如，在 Windows 上，在 Google *Chrome* 中按 <CTRL>+<SHIFT>+<J>，在 Microsoft Edge 中按 <F12>，在 Mozilla *Firefox* 中按 <CTRL>+<SHIFT>+<I>（或者 <F12>）。你也可以通过菜单打开控制台，通常在“更多工具”或“开发者工具”等菜单项下。如果你安装了多个浏览器，并且在所有浏览器中都打开了控制台，你会立刻发现一些相似之处。

前两个标签，我们在这里主要使用的标签，通常有“元素”、“检查器”或类似的名称，以及“控制台”。在“元素”下，您可以看到当前加载页面的 HTML 代码，并可以在这些 HTML 代码中进行交互式浏览。通过标记 HTML 源代码中的某个元素，该元素在网页视图中的表示会被自动高亮显示。这使得您能够轻松看到源代码中的哪部分对应网页显示的哪部分。通过展开和折叠源代码中的元素，您还可以更紧凑地显示源代码，更好地理解 HTML 元素的层级嵌套。对于我们的小示例页面（◘ 图 [29.1](#Fig1)）来说，这可能没有太大影响，但当您打开其他网站时，例如维基百科或 YouTube，打开元素视图，您将能清楚地看到这个功能是多么实用。相反，您可以从*元素*切换到选择模式，在该模式下，您点击浏览器网页视图中的某个元素，然后该元素在页面源代码中的相应位置会在“元素”视图中自动高亮显示。有关这个有用功能的更多信息，请参见 ► Sect. [32.​6.​2](474412_1_En_32_Chapter.xhtml#Sec16)。![](../images/474412_1_En_29_Chapter/474412_1_En_29_Fig1_HTML.jpg)

一张截图显示了 Google Chrome 开发者工具中“元素”标签下的 HTML 代码。代码包括位于 body 标签中的 JavaScript。右侧选择了样式标签。

图 29.1

Google *Chrome* 开发者工具

被切换到其他文件的 JavaScript 程序也可以通过这种方式查看。如果您点击 HTML 代码中引用的切换出去的 JavaScript 文件，源代码会立即在另一个标签中打开。顺便提一句：您甚至可以通过*元素*标签编辑 HTML 源代码，通常是通过使用上下文菜单中的相应选项。您可以定期使用快捷键 <CTRL>+<S> 将更改保存为 HTML 文件。

对于我们的“Hello World”JavaScript 程序来说，我们主要关心的是第二个标签，即*控制台*。如果您打开它，您将看到我们的 JavaScript 代码确实产生了输出（◘ 图 [29.2](#Fig2)）。![](../images/474412_1_En_29_Chapter/474412_1_En_29_Fig2_HTML.jpg)

开发者工具的截图显示了输出。顶部选择了控制台标签，底部的文本显示为 Hello World。

图 29.2

在控制台中的“Hello World”程序输出

这意味着我们可以使用控制台打印出观众在网站上不会立即看到的输出。这在开发过程中尤其有用，可以输出不影响网页实际显示的调试信息。同时，浏览器的 JavaScript 解释器也使用控制台输出错误或警告信息。

在◘ 图 [29.3](#Fig3) 中，源代码行 **console.log(Hello world!')** 中遗漏了第一个引号。当执行代码时，解释器会指出语法错误。![](../images/474412_1_En_29_Chapter/474412_1_En_29_Fig3_HTML.jpg)

开发者工具的截图高亮显示了顶部的 Console 标签。底部显示了一个未捕获的语法错误消息。

图 29.3

Google *Chrome* 中的 JavaScript 控制台错误消息

你还可以在交互模式下使用控制台，也就是说，你可以直接在控制台中输入并执行语句。然而，与 Python 不同的是，JavaScript 中的控制台与网页没有独立的命名空间。如果你执行一个程序并创建变量，这些变量将在控制台中可用，供进一步的交互式编辑。大多数网页浏览器还支持控制台中的代码补全。当你开始输入时，系统会弹出一个菜单，提供多个选项，帮助你加速输入过程。

在下一章中，我们将深入使用控制台，因为它提供了一种简单的方式来快速输出一些信息，而下一章的重点将不在输入和输出上，而是其他概念，我们希望将全部精力集中在这些概念上。在► 第 [31.7](474412_1_En_31_Chapter.xhtml#Sec19)节，我们将专门讨论数据的输入和输出，也将看到如何直接将数据写入网页中。

如果你等不及，认为一个没有直接写入网页的“hello world”程序不算真正的“hello world”程序，可以在你的脚本文件中尝试这段代码：

document.write('<p>Hello World</p>');

刷新视图（通常使用 F5 后），你将看到输出显示在浏览器中，而不是在控制台，而是在实际的页面视图中。

### 29.2.2 稍微帮助一下：通过网络服务快速实现

直接开始编写 JavaScript 程序并不那么容易，因为首先你得创建一个网页，并将脚本集成进去。使用像开源项目 *JS Bin*（► [http://​www.​jsbin.​com](http://www.jsbin.com)）这样的网络服务会更简单，它们可以让你随意开始，而无需任何繁琐的步骤。*JS Bin* 会在 HTML 代码的适当位置执行你输入的 JavaScript 代码（但不会在 HTML 代码中显示对脚本的引用）。你还可以手动编辑 HTML 代码。在屏幕顶部，你可以使用切换按钮来选择显示哪些视图；*Output* 视图展示的是完成的网页（◘ 图 [29.4](#Fig4)）。![](../images/474412_1_En_29_Chapter/474412_1_En_29_Fig4_HTML.jpg)

截图显示了四个部分。它展示了从左到右的 HTML 代码、JavaScript、控制台和输出文本，读取 "Hello World"。各个标签页在顶部高亮显示。

图 29.4

JavaScript 网络服务 JS Bin

提示：如果你正在使用*JS Bin*，建议取消勾选屏幕右侧的*自动运行 JS*复选框，并始终通过*使用 JS 运行*按钮手动启动 JavaScript 执行。否则，*JS Bin 会*在你每次按下键时重新执行当前的 JavaScript 代码，这当然会导致控制台中出现一长串无用的错误信息。

除了*JS Bin*，还有许多其他服务提供类似的功能，比如*Plunker*（► [http://​plnkr.​co](http://plnkr.co)）或*JS.do*（► [http://​www.​js.​do](http://www.js.do)），尽管每种情况的结构有所不同。这些服务的共同点是，它们非常适合用来尝试一些东西。然而，如果你想认真学习 JavaScript，建议离线工作，并使用你自己的“基础设施”（HTML 和 JavaScript 代码文件）。这正是我们将在接下来的章节中所做的。

## 29.3 小结

在本章中，我们介绍了如何让 JavaScript 程序运行。

确保记住本章中的以下要点：

+   JavaScript 程序通常在网页中运行，因此必须将它们集成到网页中。

+   这可以通过 HTML 元素**script**来完成；可以使用**src**属性引用一个 JavaScript 脚本文件，或者将 JavaScript 代码直接嵌入到网页中的**<script>…</script>**标签之间。

+   最佳实践是在网页的*末尾*包含脚本，这样网页可以先加载并在脚本仍在加载或运行时进行查看（如果适用）。

+   HTML 元素**noscript**可用于在用户禁用浏览器中的 JavaScript 时显示消息（通常，JavaScript 已根据相应的浏览器默认设置启用）。

+   JavaScript 代码始终对网站的浏览者可见。因此，你不能“隐藏”你的代码。

+   像*JS Bin*或*Plunker*这样的网络服务允许你在无需担心将 JavaScript 集成到网页中的情况下进行尝试；这对于快速测试非常方便，但如果你想认真学习 JavaScript，就不能避免学习如何将脚本集成到网页中（这其实并不复杂）。
