## `优先队列`

你了解过[`队列`](f_0092.xhtml#sect.queues)，并发现队列是一个按先进先出（FIFO）方式处理项目的列表。这意味着数据只能在队列末尾插入，数据只从队列前端访问和移除。在访问队列的数据时，我们优先考虑数据插入的顺序。

优先队列是一个列表，其删除和访问与经典队列相似，但插入操作则像有序数组。因此，我们只从优先队列的前端删除和访问数据，但插入数据时，我们始终确保数据保持特定顺序的排序。

优先队列的一个经典应用示例是管理医院急诊室的分诊系统。在急诊室，我们不会严格按照到达顺序治疗病人，而是根据症状的严重程度来治疗病人。如果有人突然因危及生命的伤害到达，该患者将被置于队列前端，即使感冒的病人早几个小时到达。

假设我们的分诊系统将病人病情的严重程度划分为1到10的等级，其中10为最危急。我们的优先队列可能看起来是这样的：

![`images/heaps/initial_priority_queue.png`](images/heaps/initial_priority_queue.png)

在确定下一个要治疗的病人时，我们将始终选择优先队列前端的病人，因为这个病人的需求最为紧急。在这种情况下，我们下一个要治疗的病人是`病人C`。

如果现在有一位病人到达，病情严重程度为3，我们将首先将这位病人放置在优先队列的适当位置。我们称这位病人为`病人E`：

![`images/heaps/add_e_to_priority_queue.png`](images/heaps/add_e_to_priority_queue.png)

优先队列是抽象数据类型的一个示例——可以使用其他更基本的数据结构来实现的一种类型。我们可以通过使用有序数组来实现优先队列；也就是说，我们使用一个数组并应用以下约束：

+   当我们插入数据时，我们确保始终保持正确的顺序。

+   数据只能从数组的末尾移除。（这将代表优先队列的前端。）

这种方法很简单，但现在让我们分析一下它的效率。

优先队列有两个主要操作：删除和插入。

我们在第一章中看到，[`数据结构的重要性`](f_0013.xhtml#chp.understanding_data_structures)提到，从数组的前端删除是O(N)，因为我们必须移动所有数据以填补索引`0`处产生的空缺。然而，我们巧妙地调整了实现，考虑数组的末尾为优先队列的前端。这样，我们始终从数组的末尾删除，时间复杂度为O(1)。

目前，我们的优先队列删除操作的时间复杂度是`O(1)`，那么插入呢？

你了解到，插入有序数组的时间复杂度是`O(N)`，因为我们必须检查最多所有`N`个元素，以确定新数据应该放在哪里。（即使我们很早就找到了正确的位置，我们还需要将所有剩余数据向右移动。）

因此，我们基于数组的优先队列删除操作是`O(1)`，插入操作是`O(N)`。如果我们预计优先队列中会有许多项目，`O(N)`的插入可能会在我们的应用中造成一些真正不必要的拖累。

因此，计算机科学家们发现了一种数据结构，作为优先队列更高效的基础。这种数据结构是`堆`。
