| 配方 63 | 用相同类型的空白字符替换重复的空白字符 |
| --- | --- |

### 任务

假设你的空白字符移除脚本在段落和标题中有效，但你遇到了一些帖子，它们在某些列表项之前有多余的制表符，如下所示：

|   | 我的列表： |
| --- | --- |
|   | 1\. 项目一 |
|   | 2\. 项目二 |
|   | 3\. 项目三 |

如果你按照上述解决方案实现，重复的制表符将被替换为单个空格字符，导致列表项目的外观不一致：

|   | 我的列表： |
| --- | --- |
|   | 1\. 项目一 |
|   | 2\. 项目二 |
|   | 3\. 项目三 |

你需要一个解决方案，将重复的空白字符替换为相同类型的空白字符。

### 解决方案

使用捕获组捕获重复的空白字符，并通过 $1 引用它：

[part_3/removing_dup_whitespaces_same_type/removing_dup_whitespaces_ex1.js](http://media.pragprog.com/titles/fkjavascript/code/part_3/removing_dup_whitespaces_same_type/removing_dup_whitespaces_ex1.js)

|   | **const** str = |
| --- | --- |
|   | *`我的列表：* |
|   | *1\. 项目一* |
|   | *2\. 项目二* |
|   | *3\. 项目三`*; |
|   |  |
|   | **function** removeExtraWhitespaces(str) { |
|   | **const** re = */**(\s)\1**+/g*; |
|   | **return** str.replace(re, *"$1"*); |
|   | } |
|   |  |
|   | removeExtraWhitespaces(str); |
|   | *//"我的列表：* |
|   | *// 1\. 项目一* |
|   | *// 2\. 项目二* |
|   | *// 3\. 项目三"* |

该函数将重复的空白字符替换为相同类型的单一空白字符。

### 讨论

在这个例子中，str 包含一个项目列表，其中每个项目前面都有一个制表符（\t）。然而，第一个项目有一个额外的制表符，我们想要去除它。在函数内部，我们使用(\s)\1+来匹配任何空白字符，后跟一个或多个相同的空白字符。

因为我们想要将所有这些制表符替换为单一的制表符，所以我们使用反向引用来匹配捕获组(\s)所匹配的相同字符。

然后，我们使用特殊的替换模式$1将匹配的字符替换为相同类型的空白字符。正则表达式末尾的g标志表示全局匹配，这意味着它会搜索输入字符串中所有出现的模式。
