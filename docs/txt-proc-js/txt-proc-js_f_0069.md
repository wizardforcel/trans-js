| Recipe 57 | 验证邮政编码 |
| --- | --- |

### 任务

假设你经营一家在线商店，致力于尽可能快速地将包裹送到客户手中。因此，你希望确保用户输入的邮政编码（美国使用的邮政编码）符合标准格式，以防止邮寄错误。邮政编码的基本格式由五位数字组成。但还有扩展的 ZIP+4 代码，包含邮政编码的五位数字，后面跟着一个连字符和四位数字，定义了更精确的位置。

你的目标是创建一个正则表达式，能够匹配类似 12345、12345-6789 和 12345 6789 的输入格式，同时排除 1234、123456、123456789 或 1234-56789。

### 解决方案

使用以下函数：

[part_3/validating_zipcode/zipcode_ex1.js](http://media.pragprog.com/titles/fkjavascript/code/part_3/validating_zipcode/zipcode_ex1.js)

|   | **function** isValidZipCode(zipcode) { |
| --- | --- |
|   | **const** re = */^**\d{5}(?:[**-**\s]\d{4})?**$/*; |
|   | **return** re.test(zipcode); |
|   | } |
|   |  |
|   | isValidZipCode(*"12345-6789"*); *// → true* |
|   | isValidZipCode(*"12345 6789"*); *// → true* |
|   | isValidZipCode(*"12345"*); *// → true* |
|   | isValidZipCode(*"123456789"*); *// → false* |
|   | isValidZipCode(*"1234-56789"*); *// → false* |
|   | isValidZipCode(*"123456"*); *// → false* |
|   | isValidZipCode(*"1234"*); *// → false* |

使用这段代码，你可以验证给定的邮政编码是否符合美国邮政服务（USPS）使用的标准格式。

### 讨论

这个示例中的函数以邮政编码作为输入，如果它是有效的美国邮政编码（5 位数字或 5 位数字后跟一个空格/连字符和 4 位数字），则返回 true，否则返回 false。正则表达式的详细解释如下：

|   | /^\d{5}(?:[-\s]\d{4})?$/ |
| --- | --- |
|   |  |
|   | ● ^ 确认字符串开始的位置 |
|   | ● \d 匹配一个数字 |
|   | ○ {5} 表示前一个字符匹配 5 次 |
|   | ● (?:[-\s]\d{4}) 非捕获组 |
|   | ○ [-\s] 匹配列表中的一个字符 |
|   | ○ - 字符串中字面匹配字符 - |
|   | ○ \s 匹配任何空白字符 |
|   | ○ \d 匹配一个数字 |
|   | ○ {4} 精确匹配前一个标记 4 次 |
|   | ● ? 匹配前一个标记 0 次或 1 次 |
|   | ● $ 断言字符串末尾的位置 |

这个正则表达式假设提供的字符串仅包含邮政编码。如果你打算在更大的文档或输入字符串中查找邮政编码，应将 ^ 和 $ 替换为单词边界，如下所示：/\b\d{5}(?:[-\s]\d{4})?\b/。

在表单中检查邮政编码的有效性非常重要，因为这有助于避免地址数据中的错误，确保商品或服务送达正确的收件人，防止不必要的延误或额外开支。
