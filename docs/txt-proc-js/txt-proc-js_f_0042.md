| 方案 31 | 使用捕获组提取匹配值 |
| --- | --- |

### 任务

假设你需要查找一个以 .pdf 为扩展名的文件，并且只提取文件名而不包括扩展名。通常情况下，正则表达式会返回整个匹配的字符串，但你需要一个解决方案，能够识别并提取匹配字符串的特定部分，以便进一步处理。

### 解决方案

将一对圆括号围绕你想提取的模式的特定部分：

[part_2/capturing_group_p2/capturing_group_p2_ex1.js](http://media.pragprog.com/titles/fkjavascript/code/part_2/capturing_group_p2/capturing_group_p2_ex1.js)

|   | **const** re = */**\b(\w**+**)\.**pdf**\b**/*; |
| --- | --- |
|   | **const** str = *"Please download data_p2x53.pdf"*; |
|   |  |
|   | **const** result = str.match(re); |
|   |  |
|   | **if** (result) { |
|   | console.log(result[1]) |
|   | } **else** { |
|   | console.error(*"没有找到匹配项。"*); |
|   | } |
|   |  |
|   | *// 输出日志:* |
|   | *// → data_p2x53* |

你现在可以通过引用结果数组中的第二个项来访问文件名。

### 讨论

在这个例子中，我们使用了 match() 方法，而不是 test()。与 test() 返回是/否（布尔值）表示是否找到匹配不同，match() 返回更详细的信息，形式为一个数组。我们可以通过结果数组的第二个元素（result[1]）访问正则表达式中捕获组提取的子字符串。由于 JavaScript 数组是从零开始索引的，所以第二个元素在索引 1 处。

请注意调用 match() 方法的值类型。与 test() 不同，test() 是 RegEx 对象的一个属性，而 match() 是 String 对象的一个属性，因此必须在字符串上调用 match()。

现在，我们来分析正则表达式：

|   | /\b(\w+)\.pdf\b/ |
| --- | --- |
|   |  |
|   | ● \b 在单词边界处断言位置 |
|   | ● (\w+) 第一个捕获组 |
|   | ○ \w 匹配任何单词字符 |
|   | ○ + 匹配前一个符号一次或多次 |
|   | ● \. 匹配字面上的句点字符 . |
|   | ● pdf 匹配字面上的字符 pdf |
|   | ● \b 确定单词边界 |

正则表达式模式以单词边界 (\b) 开始，这意味着匹配必须发生在一个单词的开头。接下来，我们使用 (\w+) 来匹配一个或多个单词字符。围绕 \w+ 的括号表示该组应该被捕获，并供后续使用。

接着，我们使用 .pdf 来匹配字面上的字符“.pdf”，并再次使用 \b 来匹配一个单词边界，确保“.pdf”出现在单词的结尾。将这些部分结合起来，这个正则表达式可以匹配任何以“.pdf”结尾的单词。

括号是正则表达式中的一种多用途工具。它们不仅可以将符号分组并应用量词，还可以让我们提取匹配的值以便进一步处理。但如果在括号后面紧跟特殊字符，括号的含义可能会发生变化。下一个示例将进一步解释这一点。
