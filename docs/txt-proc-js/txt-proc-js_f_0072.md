| 食谱 60 | 去除被其他行分隔的重复行 |
| --- | --- |

### 任务

假设你希望像前面的示例那样，去除不相邻的重复行。例如，假设你有以下文本：

|   | 团队实力排名 |
| --- | --- |
|   | #1 克利夫兰骑士 45-28 |
|   | #2 费城76人 48-22 |
|   | #1 克利夫兰骑士 45-28 |
|   | #3 孟菲斯灰熊 43-27 |
|   | #2 费城76人 48-22 |
|   | #4 波士顿凯尔特人 49-23 |

你需要编写一段代码来输出：

|   | 团队实力排名 |
| --- | --- |
|   | #1 克利夫兰骑士 45-28 |
|   | #2 费城76人 48-22 |
|   | #3 孟菲斯灰熊 43-27 |
|   | #4 波士顿凯尔特人 49-23 |

你的代码应具有去除重复项的能力，即使它们与其他行交错出现。

### 解决方案

将字符串转换为数组，然后将数组传递给 Set 构造函数以去除重复项，最后将结果 Set 转换为字符串：

[part_3/removing_dup_lines_v2/removing_dup_lines_v2_ex1.js](http://media.pragprog.com/titles/fkjavascript/code/part_3/removing_dup_lines_v2/removing_dup_lines_v2_ex1.js)

|   | **function** removeDuplicateLines(str) { |
| --- | --- |
|   | **const** arr = str.split(*/**\r?\n**/*); |
|   | **const** **set** = [...**new** Set(arr)]; |
|   | **const** newStr = **set**.join(*"***\***n"*); |
|   | **return** newStr; |
|   | } |
|   |  |
|   | **const** str = |
|   | *`团队实力排名* |
|   | *#1 克利夫兰骑士 45-28* |
|   | *#2 费城76人 48-22* |
|   | *#1 克利夫兰骑士 45-28* |
|   | *#3 孟菲斯灰熊 43-27* |
|   | *#2 费城76人 48-22* |
|   | *#4 波士顿凯尔特人 49-23`*; |
|   |  |
|   | **const** result = removeDuplicateLines(str); |
|   |  |
|   | console.log(result); |
|   | *// 团队实力排名* |
|   | *// #1 克利夫兰骑士 45-28* |
|   | *// #2 费城76人 48-22* |
|   | *// #3 孟菲斯灰熊 43-27* |
|   | *// #4 波士顿凯尔特人 49-23* |

结果是一个去除所有重复行的字符串。

### 讨论

首先，我们使用 `split(/\r?\n/)` 按照换行符分割字符串，并创建一个数组。这样，我们就能识别数组中的重复元素并将其消除。我们可以通过遍历数组项来实现这一点，或者更方便地，利用 Set 构造函数。

所以我们将数组传递给 Set()：它会自动消除重复项，并返回一个包含唯一值的 Set 对象。之后，我们在数组中使用扩展运算符 (...) 语法，将 Set 再次转换为数组。最后，我们使用 `join("\n")` 将数组中的所有元素连接起来，每个元素之间用换行符分隔。

这种方法也可以用来去除相邻的重复行；然而，前面食谱中解释的正则表达式方案会更快。另一方面，本食谱中描述的非正则表达式方法在去除由其他行分隔的重复项时比正则表达式更快。
