| 配方 68 | 匹配浮动小数 |
| --- | --- |

### 任务

假设你打算编写一个正则表达式来匹配浮动小数，因为你想从字符串中提取股票价格。或者你可能想提取其他具有浮动小数表示的值，如利率、传感器读数、温度或坐标（纬度和经度）。

你可能希望指定符号、整数部分和小数部分的存在是否是强制性的或可选的。使用的正则表达式取决于浮动小数的可选组件。因此，本配方提供了不同的模式作为潜在的解决方案。

### 解决方案

匹配一个具有符号、整数和小数部分的浮动小数：

|   | [+-]\d+\.\d+ |
| --- | --- |

匹配一个可以有可选符号，但必须包含整数部分和小数部分的浮动小数：

|   | [+-]?\d+\.\d+ |
| --- | --- |

匹配一个带有可选符号、整数部分但必须有小数部分的浮动小数：

|   | [+-]?\d*\.\d+ |
| --- | --- |

#### 示例：

让我们从字符串中提取第一个浮动小数。该值可以有一个可选的符号，但必须包含整数部分和小数部分：

[part_3/matching_floating_points/fp_ex1.js](http://media.pragprog.com/titles/fkjavascript/code/part_3/matching_floating_points/fp_ex1.js)

|   | **function** extractFloatingPoint(str) { |
| --- | --- |
|   | **const** re = */**[**+-**]?\d**+**\.\d**+/*; |
|   | **返回** str.match(re)[0]; |
|   | } |
|   |  |
|   | extractFloatingPoint(*"今天是-4.19。"*); |
|   | *// → "-4.19"* |

任务完成！

### 讨论

在第一个模式中，我们使用方括号创建一个字符类，该字符类匹配一个加号（+）或减号（-），后跟一个或多个数字（\d+），接着是一个字面意义的句点（.），然后是一个或多个数字（\d+）。这个模式匹配一个浮点数，在字符类后面可以加上一个问号。同样，将加号替换为星号（*）在整数数字重复中，允许零个或多个数字，而不是一个或多个。

在这个示例中，我们正在验证一个浮点数是否存在于一段较大的文本中。但是，如果你想验证整个输入是否是一个浮点数，你应该使用^和$边界符。
