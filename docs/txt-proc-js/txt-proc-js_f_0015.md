| 配方 5 | 使用画布元素将颜色名称转换为十六进制值 |
| --- | --- |

### 任务

假设你正在开发一个绘图应用程序，该程序支持十六进制（hex）颜色代码。你希望提供一个字段，让用户输入颜色名称，并自动将其转换为相应的十六进制值。

你需要一个解决方案，将颜色转换为其十六进制表示。

### 解决方案

创建一个临时的 HTML 画布元素，获取其 2D 上下文，并使用 `fillStyle` 属性来转换颜色：

[part_1/converting_color_to_hex/color_to_hex_ex1.js](http://media.pragprog.com/titles/fkjavascript/code/part_1/converting_color_to_hex/color_to_hex_ex1.js)

|   | **function** convertColorToHex(color) { |
| --- | --- |
|   | **const** canvas = document.createElement(*"canvas"*); |
|   | **const** ctx = canvas.getContext(*"2d"*); |
|   | ctx.fillStyle = color; |
|   | **return** ctx.fillStyle.toUpperCase(); |
|   | } |
|   |  |
|   | convertColorToHex(*"Khaki"*); *// → "#F0E68C"* |

该函数接受一个包含网页颜色名称的字符串，并将其转换为对应的十六进制值。

### 讨论

十六进制表示法通常用于程序和网页开发中指定颜色，因为它提供了一种紧凑且高效的方式来表示各种颜色。

在十六进制表示法中，颜色由红、绿、蓝（RGB）值的组合构成，每个值由两位十六进制数（00 到 FF）表示，前两位表示红色的强度，接下来的两位表示绿色的强度，最后两位表示蓝色的强度。例如，白色的颜色代码是 #FFFFFF，它表示所有三种颜色的最大值。

在这个解决方案中，我们定义了一个函数，该函数接受一个名为color的参数，这个参数应该是一个表示颜色的字符串。在函数内部，我们使用document.createElement()方法创建一个新的HTML画布元素。这个方法根据提供的标签名称作为参数创建一个HTML元素。在这里，我们使用标签名称“canvas”来创建一个画布元素。

接下来，我们使用getContext()方法为画布创建一个上下文对象。我们通过传递“2d”作为参数来指定上下文对象应该用于二维画布。然后，我们将上下文对象的fillStyle属性设置为传递给函数的参数。这将设置用于填充任何绘制在画布上的形状的颜色。

现在，我们可以读取上下文对象的fillStyle属性来获取颜色的十六进制值。当我们使用参数Khaki调用这个函数时，它将创建一个画布元素，设置fillStyle为Khaki，并返回颜色的十六进制值#F0E68C。注意，这个函数实际上并没有在画布上绘制任何内容——它只会创建画布元素并设置fillStyle。

在从函数返回十六进制值之前，我们使用了toUpperCase()方法将十六进制字母转换为大写字母。在JavaScript和CSS中，十六进制颜色可以使用大写或小写字母表示。大写字母和小写字母表示的十六进制颜色值是相同的。

但是，通常的做法是使用大写字母表示十六进制颜色，因为这可以使代码更容易阅读，并且与代码中的其他文本有所区分。最终，选择这两种风格中的哪一种是个人偏好或风格指南的问题。

通过将颜色名称转换为十六进制表示法，我们可以指定一种颜色，这种表示法可以在不同的软件平台和设备上使用。有关网页颜色及其十六进制等效值的列表可以在维基百科上找到。^([[7]](f_0032.xhtml#FOOTNOTE-7))
